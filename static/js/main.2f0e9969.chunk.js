(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{188:function(e,t,n){e.exports=n(391)},390:function(e,t,n){},391:function(e,t,n){"use strict";n.r(t);var a=n(5),i=n.n(a),r=n(41),c=n.n(r),l=(n(193),n(6)),o=n.n(l),u=n(11),h=n(1),d=n(2),s=n(0),g=n(4),f=n(3),v=n(178),m=n(167),p=n.n(m),b=n(400),E=n(398),y=n(395),C=n(402),S=n(396),O=n(48),k=n(21),w=n(401),j=n(397),H=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(d.a)(this,Object(s.a)(t).call(this,e))).handleClick=function(e,t){n.setState({active:t}),n.props.onClick(e)},n.render=function(){return i.a.createElement(j.a.Group,{compact:!0,fluid:!0},n.props.source.map(function(e,t){return i.a.createElement(j.a,{key:t,basic:t!==n.state.active,color:"black",active:t===n.state.active,onClick:function(a,i){return n.handleClick(e,t)}},n.props.toString(e))}))},n.handleClick=n.handleClick.bind(Object(g.a)(n)),n.state={active:-1},n}return Object(f.a)(t,e),t}(a.Component),A={checkAllNotNull:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return null!=e})}},L={toCamelCase:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}},I=k.theory.Accidental,Q=k.theory.Chord,D=k.theory.Key,N=k.theory.Letter,P=k.theory.Pitch,q=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(d.a)(this,Object(s.a)(t).call(this,e))).updateHighlight=function(){var e=n.state,t=e.accidental,a=e.inversion,i=e.letter,r=e.octave,c=e.quality;if(A.checkAllNotNull(t,a,i,r,c))try{var l=Q.builder().setRoot(new P(new D(i,t),r)).add(c).setInversion(a).build();n.props.onHighlight(l.pitches),n.setState({error:!1})}catch(o){console.error(o.toString()),n.props.onHighlight([]),n.setState({error:!0})}},n.handleAccidental=function(e){n.setState({accidental:e},function(){return n.updateHighlight()})},n.handleInversion=function(e){n.setState({inversion:e},function(){return n.updateHighlight()})},n.handleLetter=function(e){n.setState({letter:e},function(){return n.updateHighlight()})},n.handleOctave=function(e){n.setState({octave:e},function(){return n.updateHighlight()})},n.handleQuality=function(e){n.setState({quality:Q.Quality[e]},function(){return n.updateHighlight()})},n.render=function(){return i.a.createElement(b.a,{attached:"bottom"},i.a.createElement(w.a,{as:"h2",dividing:!0},"Letter"),i.a.createElement(H,{source:N.values(),onClick:n.handleLetter,toString:function(e){return e.toString()}}),i.a.createElement(w.a,{as:"h2",dividing:!0},"Accidental"),i.a.createElement(H,{source:I.values(),onClick:n.handleAccidental,toString:function(e){return"".concat(e.toString()," (").concat(e.getOffset(),")")}}),i.a.createElement(w.a,{as:"h2",dividing:!0},"Octave"),i.a.createElement(H,{source:[1,2,3,4,5,6,7,8],onClick:n.handleOctave,toString:function(e){return e}}),i.a.createElement(w.a,{as:"h2",dividing:!0},"Quality"),i.a.createElement(H,{source:Object.keys(Q.Quality).slice(0,8),onClick:n.handleQuality,toString:function(e){return L.toCamelCase(e.replace(/_/g," "))}}),i.a.createElement(w.a,{as:"h2",dividing:!0},"Inversion"),i.a.createElement(H,{source:Q.Inversion.values(),onClick:n.handleInversion,toString:function(e){return L.toCamelCase(e.toString())}}),n.state.error&&i.a.createElement(S.a,{error:!0},i.a.createElement(S.a.Header,null,"Invalid input.")))},n.updateHighlight=n.updateHighlight.bind(Object(g.a)(n)),n.handleAccidental=n.handleAccidental.bind(Object(g.a)(n)),n.handleInversion=n.handleInversion.bind(Object(g.a)(n)),n.handleLetter=n.handleLetter.bind(Object(g.a)(n)),n.handleQuality=n.handleQuality.bind(Object(g.a)(n)),n.state={accidental:null,inversion:null,letter:null,octave:null,quality:null,error:!1},n}return Object(f.a)(t,e),t}(a.Component),M=k.theory.Accidental,R=k.theory.Interval,U=k.theory.Key,K=k.theory.Letter,x=k.theory.Pitch,W=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(d.a)(this,Object(s.a)(t).call(this,e))).updateHighlight=function(){var e=n.state,t=e.accidental,a=e.distance,i=e.letter,r=e.octave,c=e.quality;if(A.checkAllNotNull(t,a,i,r,c))try{var l=new x(new U(i,t),r),o=new R(c,a),u=l.step(o).get();n.props.onHighlight([l,u]),n.setState({error:!1})}catch(h){console.error(h.toString()),n.props.onHighlight([]),n.setState({error:!0})}},n.handleAccidental=function(e){n.setState({accidental:e},function(){return n.updateHighlight()})},n.handleDistance=function(e){n.setState({distance:e},function(){return n.updateHighlight()})},n.handleLetter=function(e){n.setState({letter:e},function(){return n.updateHighlight()})},n.handleOctave=function(e){n.setState({octave:e},function(){return n.updateHighlight()})},n.handleQuality=function(e){n.setState({quality:e},function(){return n.updateHighlight()})},n.render=function(){return i.a.createElement(b.a,{attached:"bottom"},i.a.createElement(w.a,{as:"h2",dividing:!0},"Letter"),i.a.createElement(H,{source:K.values(),onClick:n.handleLetter,toString:function(e){return e.toString()}}),i.a.createElement(w.a,{as:"h2",dividing:!0},"Accidental"),i.a.createElement(H,{source:M.values(),onClick:n.handleAccidental,toString:function(e){return"".concat(e.toString()," (").concat(e.getOffset(),")")}}),i.a.createElement(w.a,{as:"h2",dividing:!0},"Octave"),i.a.createElement(H,{source:[1,2,3,4,5,6,7,8],onClick:n.handleOctave,toString:function(e){return e}}),i.a.createElement(w.a,{as:"h2",dividing:!0},"Quality"),i.a.createElement(H,{source:R.Quality.values(),onClick:n.handleQuality,toString:function(e){return e.toString()}}),i.a.createElement(w.a,{as:"h2",dividing:!0},"Distance"),i.a.createElement(H,{source:[2,3,4,5,6,7,8],onClick:n.handleDistance,toString:function(e){return e}}),n.state.error&&i.a.createElement(S.a,{error:!0},i.a.createElement(S.a.Header,null,"Invalid input.")))},n.updateHighlight=n.updateHighlight.bind(Object(g.a)(n)),n.handleAccidental=n.handleAccidental.bind(Object(g.a)(n)),n.handleDistance=n.handleDistance.bind(Object(g.a)(n)),n.handleLetter=n.handleLetter.bind(Object(g.a)(n)),n.handleOctave=n.handleOctave.bind(Object(g.a)(n)),n.handleQuality=n.handleQuality.bind(Object(g.a)(n)),n.state={accidental:null,distance:null,letter:null,octave:null,quality:null,error:!1},n}return Object(f.a)(t,e),t}(a.Component),B=k.theory.Accidental,J=k.theory.Direction,_=k.theory.Key,G=k.theory.Letter,T=k.theory.Pitch,$=k.theory.Scale,z=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(d.a)(this,Object(s.a)(t).call(this,e))).updateHighlight=function(){var e=n.state,t=e.accidental,a=e.count,i=e.direction,r=e.letter,c=e.octave,l=e.quality;if(A.checkAllNotNull(t,a,i,r,c,l))try{var o=new $(new T(new _(r,t),c),l);n.props.onHighlight(o.stream(i).limit(a)),n.setState({error:!1})}catch(u){console.error(u.toString()),n.props.onHighlight([]),n.setState({error:!0})}},n.handleAccidental=function(e){n.setState({accidental:e},function(){return n.updateHighlight()})},n.handleLetter=function(e){n.setState({letter:e},function(){return n.updateHighlight()})},n.handleOctave=function(e){n.setState({octave:e},function(){return n.updateHighlight()})},n.handleQuality=function(e){n.setState({quality:$.Quality[e]},function(){return n.updateHighlight()})},n.handleDirection=function(e){n.setState({direction:e},function(){return n.updateHighlight()})},n.handleCount=function(e){n.setState({count:e},function(){return n.updateHighlight()})},n.render=function(){return i.a.createElement(b.a,{attached:"bottom"},i.a.createElement(w.a,{as:"h2",dividing:!0},"Letter"),i.a.createElement(H,{source:G.values(),onClick:n.handleLetter,toString:function(e){return e.toString()}}),i.a.createElement(w.a,{as:"h2",dividing:!0},"Accidental"),i.a.createElement(H,{source:B.values(),onClick:n.handleAccidental,toString:function(e){return"".concat(e.toString()," (").concat(e.getOffset(),")")}}),i.a.createElement(w.a,{as:"h2",dividing:!0},"Octave"),i.a.createElement(H,{source:[1,2,3,4,5,6,7,8],onClick:n.handleOctave,toString:function(e){return e}}),i.a.createElement(w.a,{as:"h2",dividing:!0},"Quality"),i.a.createElement(H,{source:Object.keys($.Quality).slice(0,8),onClick:n.handleQuality,toString:function(e){return L.toCamelCase(e.replace(/_/g," "))}}),i.a.createElement(w.a,{as:"h2",dividing:!0},"Direction"),i.a.createElement(H,{source:J.values(),onClick:n.handleDirection,toString:function(e){return L.toCamelCase(e.toString())}}),i.a.createElement(w.a,{as:"h2",dividing:!0},"Count"),i.a.createElement(H,{source:[1,2,3,4,5,6,7,8,9,10,11,12,13],onClick:n.handleCount,toString:function(e){return e}}),n.state.error&&i.a.createElement(S.a,{error:!0},i.a.createElement(S.a.Header,null,"Invalid input.")))},n.updateHighlight=n.updateHighlight.bind(Object(g.a)(n)),n.handleAccidental=n.handleAccidental.bind(Object(g.a)(n)),n.handleCount=n.handleCount.bind(Object(g.a)(n)),n.handleDirection=n.handleDirection.bind(Object(g.a)(n)),n.handleLetter=n.handleLetter.bind(Object(g.a)(n)),n.handleQuality=n.handleQuality.bind(Object(g.a)(n)),n.handleDirection=n.handleDirection.bind(Object(g.a)(n)),n.state={accidental:null,count:null,direction:null,letter:null,octave:null,quality:null,error:!1},n}return Object(f.a)(t,e),t}(a.Component),F=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(d.a)(this,Object(s.a)(t).call(this,e))).loadPiano=function(){n.setState({loading:!0});var e=new v.a({velocities:5});e.toDestination(),e.load().then(function(){n.setState({piano:e,loading:!1})})},n.handleMenu=function(e,t){var a=t.name;n.state.active!==a&&n.setState({active:a,highlight:[]})},n.pitchesDown=function(e){var t=n.state.piano;e.map(function(e){return e.getProgramNumber()}).forEach(function(e){return t.keyDown(e)})},n.pitchesUp=function(e){var t=n.state.piano;e.map(function(e){return e.getProgramNumber()}).forEach(function(e){return t.keyUp(e)})},n.play=function(){var e=Object(u.a)(o.a.mark(function e(t,a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.pitchesUp(t),n.pitchesDown(a);case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.handleHighlight=function(e){var t=n.state.highlight;n.setState({highlight:e},function(){n.play(t,e)})},n.renderContainer=function(){switch(n.state.active){case"Interval":return i.a.createElement(W,{onHighlight:n.handleHighlight});case"Chord":return i.a.createElement(q,{onHighlight:n.handleHighlight});case"Scale":return i.a.createElement(z,{onHighlight:n.handleHighlight});case"Piano":return i.a.createElement(b.a,{attached:"bottom"},i.a.createElement("code",null,"const scale = new Scale(startPitch, Scale.Quality.CHROMATIC);"));default:return null}},n.render=function(){var e=n.state,t=e.active,a=e.highlight,r=e.piano,c=e.loading;return i.a.createElement("div",null,i.a.createElement(E.a,{fixed:"top",inverted:!0},i.a.createElement(y.a,null,i.a.createElement(E.a.Item,{header:!0,name:"etude demo"}))),i.a.createElement(C.a,{verticalAlign:"top"},i.a.createElement(C.a.Row,{centered:!0},i.a.createElement(p.a,{start:"A1",end:"C8",keyPressed:function(e){null!=r&&r.keyDown({note:e.getKey()+e.getOctave()})},keyReleased:function(e){null!=r&&r.keyUp({note:e.getKey()+e.getOctave()})},highlight:a,showLabel:!0})),i.a.createElement(C.a.Row,null,i.a.createElement(y.a,null,null==r&&!c&&i.a.createElement("button",{onClick:n.loadPiano},"Load piano sounds"),null==r&&c&&i.a.createElement(S.a,{icon:!0,info:!0},i.a.createElement(O.a,{name:"circle notched",loading:!0}),i.a.createElement(S.a.Content,null,i.a.createElement(S.a.Header,null,"Loading piano sounds..."))),i.a.createElement(E.a,{attached:"top",tabular:!0},i.a.createElement(E.a.Item,{header:!0,name:"Piano",active:"Piano"===t,onClick:n.handleMenu}),i.a.createElement(E.a.Item,{name:"Interval",active:"Interval"===t,onClick:n.handleMenu}),i.a.createElement(E.a.Item,{name:"Chord",active:"Chord"===t,onClick:n.handleMenu}),i.a.createElement(E.a.Item,{name:"Scale",active:"Scale"===t,onClick:n.handleMenu})),n.renderContainer()))))},n.handleHighlight=n.handleHighlight.bind(Object(g.a)(n)),n.renderContainer=n.renderContainer.bind(Object(g.a)(n)),n.state={active:"Chord",highlight:[],piano:null,loading:!1},n}return Object(f.a)(t,e),t}(a.Component),V=(n(390),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function X(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(i.a.createElement(F,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/etude-demo",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/etude-demo","/service-worker.js");V?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):X(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):X(e)})}}()}},[[188,1,2]]]);
//# sourceMappingURL=main.2f0e9969.chunk.js.map